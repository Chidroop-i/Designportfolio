function get500Image(t){return userObject.isMobile,t.replace("/100/","/500/")}function getP(t,a){return Math.round(100*t/a)}function getPoints(){_JCROP.whcc={};var t=Math.round((_JCROP.coor.x+_JCROP.coor.x2)/2),a=Math.round((_JCROP.coor.y+_JCROP.coor.y2)/2);_JCROP.whcc.x1=getP(t,_JCROP.img.x),_JCROP.whcc.y1=getP(a,_JCROP.img.y),_JCROP.whcc.x3=getP(_JCROP.coor.w,_JCROP.img.x),_JCROP.whcc.y3=getP(_JCROP.coor.h,_JCROP.img.y),_JCROP.whcc.x2=50,_JCROP.whcc.y2=50}function updateCartCoordinates(){if(!_JCROP.cartid||void 0===_JCROP.cartid)return alert("Item is no longer available in your cart."),!1;var t=_JCROP.cartid,a=$(".js-price-list-body").data("requestslug").split("/");a[3]="update-crop";var e=a.join("/");$.ajax({type:"POST",url:e+"?_token="+$("#csrf_token").val(),data:{cartid:t,data_x:_JCROP.coor.x,data_y:_JCROP.coor.y,data_h:parseInt(_JCROP.coor.y+_JCROP.coor.h),data_w:parseInt(_JCROP.coor.x+_JCROP.coor.w),data_oh:parseInt(_JCROP.coor.h),data_ow:parseInt(_JCROP.coor.w),print_width:parseFloat(_JCROP.asp.x),print_height:parseFloat(_JCROP.asp.y)}}).done(function(t){_JCROP.active.setAttribute("data-x",_JCROP.coor.x),_JCROP.active.setAttribute("data-y",_JCROP.coor.y),_JCROP.active.setAttribute("data-h",parseInt(_JCROP.coor.y+_JCROP.coor.h)),_JCROP.active.setAttribute("data-w",parseInt(_JCROP.coor.x+_JCROP.coor.w)),_JCROP.active.setAttribute("data-oh",parseInt(_JCROP.coor.h)),_JCROP.active.setAttribute("data-ow",parseInt(_JCROP.coor.w)),_JCROP.active.setAttribute("data-aspx",parseFloat(_JCROP.asp.x)),_JCROP.active.setAttribute("data-aspy",parseFloat(_JCROP.asp.y)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-x",_JCROP.coor.x),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-y",_JCROP.coor.y),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-h",parseInt(_JCROP.coor.y+_JCROP.coor.h)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-w",parseInt(_JCROP.coor.x+_JCROP.coor.w)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-oh",parseInt(_JCROP.coor.h)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-ow",parseInt(_JCROP.coor.w)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-aspx",parseFloat(_JCROP.asp.x)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-aspy",parseFloat(_JCROP.asp.y));noty($.extend({text:"undefined"!=window.labels?window.labels.crop_area_has_been_updated:"Crop area has been updated",type:"success",template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',timeout:4e3},window.notyDefaults))})}window.Global_Store={galleryCart:".js-gal-cart",favGalleryCart:".js-fav-gal-cart",addPhoto:".js-add-photo",floatingCartOverlay:".js-proofing-fc-overlay",floatingCartBlock:".js-proofing-fc-block",floatingCartClose:".js-proofing-fc-close",cartItemRemove:".js-cart-item-remove",floatingCartBtn:".js-floating-pcart",insideCartQuantity:".js-inside-cart-quantity",checkoutForm:".js-pcheckout-form",cropImageBtn:".js-crop-image",cropImageCloseBtn:".js-image-crop-close-btn",cropImage:".js-image-crop-overlay",cropCartUpdate:".js-update-cart-img-coordinates",gridItem:".js-store-grid-item",addCartBtn:".js-addcart-btn",listingAddCartBtn:".js-listing-addcart-btn"},Global_Store.Init=function(){var t,a,e,i,r,o,l,n,s,d,c,p,m,h,u,g,b,f,y,j,w;function v(t,a,e,i){return 300*e<=a&&300*i<=t}function _(t,a,e,i,r){var o,l,n,s=r.toLowerCase().split("x");s[0]=parseInt(s[0]),s[1]=parseInt(s[1]),parseInt(t)>=parseInt(a)?(l=s[0]>s[1]?s[0]:s[1],o=s[0]<s[1]?s[0]:s[1],n="fullheight"):(o=s[0]>s[1]?s[0]:s[1],l=s[0]<s[1]?s[0]:s[1],n="fullwidth"),window.CurrentImage={large_height:t,large_width:a,height:i,width:e},e=parseInt(e),i=parseInt(i);var d={priority:n,aspx:o,aspy:l,status:!1};if(1==$(".js-printable-check-val").attr("data-photocheck")&&!v(t,a,o,l))return d.status=!1,d.x=-1,d.y=-1,d.h=-1,d.w=-1,d.ow=-1,d.oh=-1,d;if("fullheight"==n){if(d.h=i,d.w=Math.round(i*o/l),d.w<=e)return d.type="height 100%",d.x=Math.round((e-d.w)/2),d.y=0,d.ow=d.w,d.oh=d.h,d.w+=d.x,d.status=!0,d;if(d.w=e,d.h=Math.round(e*l/o),d.h<=i)return d.type="width 100%",d.x=0,d.y=Math.round((i-d.h)/2),d.oh=d.h,d.ow=d.w,d.h+=d.y,d.status=!0,d}else{if(d.w=e,d.h=Math.round(e*l/o),d.h<=i)return d.type="width 100%",d.x=0,d.y=Math.round((i-d.h)/2),d.oh=d.h,d.ow=d.w,d.h+=d.y,d.status=!0,d;if(d.h=i,d.w=Math.round(i*o/l),d.w<=e)return d.type="height 100%",d.x=Math.round((e-d.w)/2),d.y=0,d.ow=d.w,d.oh=d.h,d.w+=d.x,d.status=!0,d}return 0!=$(".js-printable-check-val").attr("data-photocheck")||v(t,a,o,l)?d:(d.status=!1,d.x=o,d.y=l,d.h=i,d.w=e,d.ow=a,d.oh=t,d)}Global_Store.cropModalInit(),$(function(){Global_Store.jCropint(this)}),$.each($(".js-gal-cart-ref"),function(t,a){var e=".js-"+$(a).data("imageid")+"-"+$(a).data("optionid");$(e).attr("data-quantity",$(a).data("quantity"))}),$.each($(".js-fullgallery-cartitems"),function(t,a){var e=".js-fullgallery-"+$(a).data("galleryid")+"-"+$(a).data("fullgalleryoptionid");$(e).attr("data-quantity",$(a).data("quantity")),$(e).attr("data-fullgalleryoptionid",$(a).data("fullgalleryoptionid")),$(e).attr("data-fullgalleryimageid",$(a).data("imageid"))}),t=$("#csrf_token").val(),$("body").on("click",Global_Store.addPhoto,function(c){var v;if($(".js-proofing-fc-loading").show(),p="fav-page"==$(this).data("pagetype")?$(this).data("linkslug"):$(".js-price-list-body").attr("data-linkslug"),w=$(".js-price-list-img").attr("data-galleryid"),r=$(".js-price-list-img img").attr("src"),d=$(".js-global-currency").val(),u=$(".js-price-list-body").data("itemadded"),g=$(".js-price-list-body").data("itemremove"),$(this).parent().find("span"),label_id=$(this).data("labelid"),downloadtype=$(this).data("downloadtype"),temp2=".js-add-fullgallery-"+w+"-"+label_id,y='<div class="js-favimg-noty favimg-noty"><img src="'+r+'"></div>',spanCount=parseInt($(this).siblings("span").text()),n=$(this).data("price"),o=$(this).data("title"),b=$(this).data("labcatalogid"),f=$(this).attr("data-printable"),h=$(this).data("type"),2==downloadtype&&""!=$(temp2).attr("data-fullgalleryoptionid")&&0!=$(temp2).attr("data-fullgalleryoptionid")?(labelid=$(temp2).attr("data-fullgalleryoptionid"),a=$(temp2).attr("data-fullgalleryimageid")):(labelid=$(this).data("labelid"),a=$(".js-price-list-img").attr("data-imageid")),y='<div class="js-favimg-noty favimg-noty left"><img src="'+r+'"></div>',j='<div class="js-favimg-title noty-favimg-title">'+o+"</div>",2==h)if($(this).hasClass("plus-icon")){if(spanCount+1>=2)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_digital_warning:"This digital item is already in your cart!","error"),!1;l=1,m=u,$(this).siblings("span").text(1)}else{if(spanCount-1<0)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1;l=0,m=g,$(this).siblings("span").text(0)}else if($(this).hasClass("plus-icon"))$(this).siblings("span").text(spanCount+1),l=spanCount+1,m=u;else{if(spanCount-1<0)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1;$(this).siblings("span").text(spanCount-1),l=spanCount-1,m=g}i=".js-"+$(".js-price-list-img").attr("data-imageid")+"-"+labelid,$(i).attr("data-quantity",l),$(temp2).attr("data-quantity",l),2==downloadtype&&(1==l?($(temp2).attr("data-fullgalleryoptionid",labelid),$(temp2).attr("data-fullgalleryimageid",a)):($(temp2).attr("data-fullgalleryoptionid","0"),$(temp2).attr("data-fullgalleryimageid","0"))),e=$("#cart-item-template").html(),e=$(e)[0],$(e).attr("data-optionlabel",labelid),$(e).attr("data-productid",a),$(e).find(".cart-item-image").attr("src",r),$(e).find(".cart-item-title").html(o),$(e).find(".cart-item-label").hide(),$(e).find(".cart-item-unitprice").html(d+n),$(e).find(".cart-item-quantity").val(l),$(e).find(".cart-item-quantity").attr("data-prevvalue",l),$(e).find(".cart-item-quantity").attr("data-title",o),$(e).find(".cart-item-quantity").attr("data-maxlimit",$(".js-quantity").attr("max")),$(e).find(".cart-item-quantity").attr("data-type",h),$(e).find(".cart-item-quantity").attr("data-product_type","proofing"),$(e).find(".js-cart-item-remove").attr("data-product_type","proofing"),$(e).find(".cart-item-price").html(d+""+n*l),0==f&&($(e).find(Global_Store.cropImageBtn).remove(),$(e).find(".crop-image-view").removeClass("jcrop-img-view")),v=e,$.ajax({type:"POST",url:$(".js-price-list-body").data("requestslug")+"?_token="+t,data:{id:a,option:labelid,quantity:l,"gallery-slug":p,lab_catalog_id:b,global:"1"}}).done(function(t){console.log(t),$(e).find(Global_Store.cropImageBtn).attr("data-x",t.x),$(e).find(Global_Store.cropImageBtn).attr("data-y",t.y),$(e).find(Global_Store.cropImageBtn).attr("data-h",t.h),$(e).find(Global_Store.cropImageBtn).attr("data-w",t.w),$(e).find(Global_Store.cropImageBtn).attr("data-oh",t.oh),$(e).find(Global_Store.cropImageBtn).attr("data-ow",t.ow),$(e).find(Global_Store.cropImageBtn).attr("data-aspx",t.aspx),$(e).find(Global_Store.cropImageBtn).attr("data-aspy",t.aspy),0!=f&&($(e).find(".jcrop-img-view").attr("data-x",t.x),$(e).find(".jcrop-img-view").attr("data-y",t.y),$(e).find(".jcrop-img-view").attr("data-h",t.h),$(e).find(".jcrop-img-view").attr("data-w",t.w),$(e).find(".jcrop-img-view").attr("data-oh",t.oh),$(e).find(".jcrop-img-view").attr("data-ow",t.ow),$(e).find(".jcrop-img-view").attr("data-aspx",t.aspx),$(e).find(".jcrop-img-view").attr("data-aspy",t.aspy),$(function(){$(e).find(".jcrop-img-view img").Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t.x,t.y,t.h,t.w],aspectRatio:t.aspx/t.aspy,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[t.w,t.h]})})),$(".js-proofing-fc-loading").hide(),a==t.productId&&Global_Store.AddNewItem(v),$(".js-ptotal-amount").html(t.totalPrice),$(".js-pcart-quantity").text(t.quantity),0==t.quantity?($(".js-floating-pcart-empty").show(),$(Global_Store.floatingCartBtn).addClass("cart-not-active"),$(".js-pcheckout-container").hide(),$(".js-cart-qty-container").hide()):($(".js-floating-pcart-empty").hide(),$(".js-pcheckout-container").show(),$(Global_Store.floatingCartBtn).removeClass("cart-not-active"),$(".js-proofing-header-cart").addClass("favourite-count-active"),$(".js-cart-qty-container").show()),0==t.quantity&&($(".js-floating-cart-empty").show(),$(".js-checkout-container").hide(),$(".js-floating-cart").addClass("cart-not-active")),null!=t.cartImages[a]?($($(".js-slideshowgal-cart")[window.slideIndex]).addClass("favourite-info-active"),$(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","1"),$(".shopping-cart-show[data-imageid='"+a+"']").addClass("shopping-cart-active")):($(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","0"),$(".shopping-cart-show[data-imageid='"+a+"']").removeClass("shopping-cart-active"),$($(".js-slideshowgal-cart")[window.slideIndex]).removeClass("favourite-info-active")),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all")),$.each($(".js-proofing-cart-item-listing .js-cart-item-list"),function(a,e){t.productId==$(e).attr("data-productid")&&t.optionId==$(e).attr("data-optionlabel")&&($(e).find(Global_Store.cartItemRemove).attr("data-itemid",t.itemId),$(e).find(Global_Store.insideCartQuantity).attr("data-itemid",t.itemId))})}),Global_Store.AddNewItem=function(t){0!=$(".js-proofing-cart-item-listing .js-cart-item-list").length?$.each($(".js-proofing-cart-item-listing .js-cart-item-list"),function(t,e){$(e).attr("data-productid")==a&&$(e).attr("data-optionlabel")==labelid?($(e).remove(),s=1):s=1}):$(".js-pcart-item-container").find(".js-proofing-cart-item-listing").append(t),1==s&&$(".js-pcart-item-container").find(".js-proofing-cart-item-listing").append(t),$.each($(".js-proofing-cart-item-listing .js-cart-item-list"),function(t,a){0!=$(a).find(Global_Store.insideCartQuantity).val()&&""!=$(a).find(Global_Store.insideCartQuantity).val()||$(a).remove()});noty($.extend({text:m,type:"success",template:'<div class="noty_message text-left left">'+y+j+'<span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:4e3},window.notyDefaults));Global_Store.cropModalInit()}}),$("body").on("change",Global_Store.insideCartQuantity,function(a){var e,r=$(this).val();e=$(this).attr("data-product_type"),r<=0?(sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),$(this).val($(this).attr("data-prevvalue")),r=$(this).attr("data-prevvalue")):Number.isInteger(parseFloat(r))&&2!=$(this).attr("data-type")||(r=1,$(this).val(1)),c=$(this).data("itemid");var o=$(this);if(i=".js-"+o.parents(".js-cart-item-list").attr("data-productid")+"-"+o.parents(".js-cart-item-list").attr("data-optionlabel"),$(i).attr("data-quantity",r),"proofing"==e)var l="/site/floating-quantity/";else l="/floating-quantity/";$.ajax({type:"POST",url:l+c+"?_token="+t,data:{quantity:r,global:"1","client-slug":$(".js-price-list-body").attr("data-clientslug")}}).done(function(t){console.log(t),o.siblings(".js-cart-item-price").html($(".js-global-currency").val()+t.product_total),$(".js-ptotal-amount").html(t.totalPrice),$(".js-pcart-quantity").text(t.quantity),0==t.quantity?$(".js-cart-qty-container").hide():$(".js-cart-qty-container").show(),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all"))})}),$("body").on("click",Global_Store.cartItemRemove,function(a){c=$(this).data("itemid");var e=$(this).attr("data-product_type"),r=$(this);if("proofing"==(e=$(this).attr("data-product_type")))var o="/site/floating-remove-item/";else o="/floating-remove-item/";swal({title:$(".js-price-list-body").data("willremoved"),text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:void 0!==window.labels?window.labels.store_cart_confirm_remove:"Yes, remove it",cancelButtonText:void 0!==window.labels?window.labels.store_cart_cancel_button:"Cancel",closeOnConfirm:!0,closeOnCancel:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0},function(a){a?($("button.confirm").attr("disabled",!0),$.ajax({type:"POST",url:o+c+"?_token="+t,data:{global:"1"}}).done(function(t){if(console.log(t),$("button.confirm").attr("disabled",!1),r.parents(".js-cart-item-list").remove(),$(".js-ptotal-amount").html(t.totalPrice),$(".js-pcart-quantity").text(t.quantity),"proofing"==e){var a=r.parents(".js-cart-item-list").attr("data-productid");null!=t.cartImages[r.parents(".js-cart-item-list").attr("data-productid")]?$($(".js-slideshowgal-cart")[window.slideIndex]).addClass("favourite-info-active"):$($(".js-slideshowgal-cart")[window.slideIndex]).removeClass("favourite-info-active"),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all")),i=".js-"+r.parents(".js-cart-item-list").attr("data-productid")+"-"+r.parents(".js-cart-item-list").attr("data-optionlabel"),$(i).attr("data-quantity",0)}else t.quantity>1?$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemslabel")):$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemlabel")),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all"));0==t.quantity?($(".js-floating-pcart-empty").show(),$(".js-pcheckout-container").hide(),$(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","0"),$(Global_Store.floatingCartBtn).addClass("cart-not-active"),$(".js-cart-qty-container").hide()):$(".js-cart-qty-container").show();noty($.extend({text:$(".js-price-list-body").data("willremoved"),type:"success",template:'<div class="noty_message"><span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:6e3},window.notyDefaults))})):(swal(void 0!==window.labels?window.labels.store_cart_cancelled:"Cancelled",void 0!==window.labels?window.labels.store_cart_still_in_cart:"Item is still in cart :)","error"),$("button.confirm").attr("disabled",!1))})}),$("body").on("click",Global_Store.galleryCart,function(t){t.stopPropagation(),$("body").addClass("no-scroll"),$(".js-price-list-body").show(),$(".js-pcart-item-wrapper").hide(),$(".js-price-list-img").attr("data-imageid",$(this).attr("data-imageid")),$(".js-price-list-img").attr("data-galleryid",$(this).attr("data-galleryid")),$(".js-price-list-img img").attr("src",$(this).attr("data-smallscreen"));var a,e=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height"),i=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width"),r=e,o=i;void 0!==e&&void 0!==i&&(o=i,r=e,newUnit=500,"1"==$(this).attr("data-jcropnewimg")?newUnit=500:newUnit=400,o<=newUnit&&r<=newUnit||(500==newUnit?(o>newUnit&&(o=newUnit,r=Math.round(newUnit*e/i)),r>newUnit&&(r=newUnit,o=Math.round(newUnit*i/e))):o>newUnit?(o=newUnit,r=Math.round(newUnit*e/i)):r>newUnit&&(r=newUnit,o=Math.round(newUnit*i/e)))),$.each($(".js-photono-"+$(this).attr("data-imageid")),function(t,l){$that=$(l),$.each($(".js-table-tr"),function(t,l){if($that.attr("data-optionid")==$(l).attr("data-labelid")&&($(l).find("span").text($that.attr("data-quantity")),$(this).attr("data-labcatlogid")>=0&&0==$(l).attr("data-download"))){var n=$(l).find(".label-v");a="",parseFloat($(n).attr("data-height"))>0&&parseFloat($(n).attr("data-width"))>0?a=$(n).attr("data-width")+" x "+$(n).attr("data-height"):-1!==(a=$(l).find(".label-v").text()).indexOf("8 Up Wallet")&&(a="2.5 x 3.5"),_(e,i,o,r,a).status?$(l).show():"js-check-printable-size"==$that.attr("data-photocheck")&&$(l).hide()}}),$(".js-table-container").each(function(t,a){if($(a).find(".js-table-tr").is(":visible")){$(a).find(".tr-heading").show();var e=$(a).find(".tr-heading").find(".label-v").attr("id");$(".proofing-category").find(".data-target").each(function(){$(this).attr("data-id")==e&&$(this).show()})}else{$(a).find(".tr-heading").hide();e=$(a).find(".tr-heading").find(".label-v").attr("id");$(".proofing-category").find(".data-target").each(function(){$(this).attr("data-id")==e&&$(this).hide()})}}),$(".js-table-tr").is(":visible")?$(".js-options-not-found").hide():$(".js-options-not-found").show()}),$(".js-price-list-img img").unbind("load"),$(".js-price-list-img img").on("load",function(){$(Global_Store.floatingCartOverlay+" ,"+Global_Store.floatingCartBlock).addClass("active")})}),Global_Store.rotateCrop=function(){var t,a,e,i,r=_JCROP.active,o={};t=parseInt($(r).attr("data-aspy")),a=parseInt($(r).attr("data-aspx")),"fullheight"==((e=_JCROP.img.x)>(i=_JCROP.img.y)?"fullwidth":"fullheight")?(o.h=i,o.w=Math.round(i*t/a),o.w<=e&&(o.type="height 100%",o.x=Math.round((e-o.w)/2),o.y=0,o.ow=o.w,o.oh=o.h,o.w+=o.x,o.status=!0),o.w=e,o.h=Math.round(e*a/t),o.h<=i&&(o.type="width 100%",o.x=0,o.y=Math.round((i-o.h)/2),o.oh=o.h,o.ow=o.w,o.h+=o.y,o.status=!0)):(o.w=e,o.h=Math.round(e*a/t),o.h<=i&&(o.type="width 100%",o.x=0,o.y=Math.round((i-o.h)/2),o.oh=o.h,o.ow=o.w,o.h+=o.y,o.status=!0),o.h=i,o.w=Math.round(i*t/a),o.w<=e&&(o.type="height 100%",o.x=Math.round((e-o.w)/2),o.y=0,o.ow=o.w,o.oh=o.h,o.w+=o.x,o.status=!0)),$(r).attr("data-x",o.x),$(r).attr("data-y",o.y),$(r).attr("data-h",o.h),$(r).attr("data-w",o.w),$(r).attr("data-oh",o.oh),$(r).attr("data-ow",o.ow),$(r).attr("data-aspx",t),$(r).attr("data-aspy",a),_JCROP.asp={x:parseFloat($(r).attr("data-aspx")),y:parseFloat($(r).attr("data-aspy"))},_JCROP.jcrop.release(),_JCROP.jcrop.setSelect([o.x,o.y,o.w,o.h])},$("body").on("click",Global_Store.favGalleryCart,function(t){t.stopPropagation(),$("body").addClass("no-scroll"),$(".js-plt").hide(),$(".js-plt_"+$(this).attr("data-galleryid")).show(),$(".js-price-list-body").show(),$(".js-pcart-item-wrapper").hide(),$(".js-price-list-img").attr("data-imageid",$(this).attr("data-imageid")),$(".js-price-list-img").attr("data-galleryid",$(this).attr("data-galleryid")),$(".js-price-list-img img").attr("src",$(this).attr("data-smallscreen"));$(this).data("imageid");var a,e,i,r=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height"),o=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width");void 0!==r&&void 0!==o&&(e=o,a=r,newUnit=500,e<=newUnit&&a<=newUnit||e>newUnit&&(e=newUnit,a=Math.round(newUnit*r/o)));var l=$(".price-list-table:visible").attr("data-galleryid"),n=$(".js-photono-"+$(this).attr("data-imageid"));void 0!==l&&""!=l&&$(".js-photono-"+$(this).attr("data-imageid")+"[data-galleryid="+l+"]").length>0&&(n=$(".js-photono-"+$(this).attr("data-imageid")+"[data-galleryid="+l+"]")),$.each(n,function(t,l){$that=$(l),$.each($(".js-table-tr"),function(t,l){if($that.attr("data-optionid")==$(l).attr("data-labelid")&&($(l).find("span").text($that.attr("data-quantity")),$(this).attr("data-labcatlogid")>=0&&0==$(l).attr("data-download"))){var n=$(l).find(".label-v");i="",parseFloat($(n).attr("data-height"))>0&&parseFloat($(n).attr("data-width"))>0?i=$(n).attr("data-width")+" x "+$(n).attr("data-height"):-1!==(i=$(l).find(".label-v").text()).indexOf("8 Up Wallet")&&(i="2.5 x 3.5");var s=_(r,o,e,a,i);s.status?$(l).show():"js-check-printable-size"==$that.attr("data-photocheck")&&$(l).hide(),$(l).find("span").attr("data-x",s.x),$(l).find("span").attr("data-y",s.y),$(l).find("span").attr("data-h",s.h),$(l).find("span").attr("data-w",s.w),$(l).find("span").attr("data-oh",s.oh),$(l).find("span").attr("data-ow",s.ow),$(l).find("span").attr("data-aspx",s.aspx),$(l).find("span").attr("data-aspy",s.aspy)}})}),$(".js-table-container").each(function(t,a){$(a).find(".js-table-tr").is(":visible")?$(a).find(".tr-heading").show():$(a).find(".tr-heading").hide()}),$(".js-table-tr").is(":visible")?$(".js-options-not-found").hide():$(".js-options-not-found").show(),$(".js-price-list-img img").unbind("load"),$(".js-price-list-img img").on("load",function(){$(Global_Store.floatingCartOverlay+" ,"+Global_Store.floatingCartBlock).addClass("active")})}),$(Global_Store.floatingCartClose+" ,"+Global_Store.floatingCartOverlay).on("click",function(t){$(Global_Store.floatingCartOverlay+" ,"+Global_Store.floatingCartBlock).removeClass("active"),$("body").removeClass("no-scroll"),$(".js-prod-desc-single-modal, .js-prod-info").removeClass("active"),$(".js-prod-info").parent().parent(".js-table-tr").removeClass("active"),$(".js-image-crop-close-btn").click()}),$(Global_Store.floatingCartBtn+", .js-pcart-nextstep").unbind("click"),$("body").on("click",Global_Store.floatingCartBtn+", .js-pcart-nextstep",function(t){$(Global_Store.floatingCartOverlay+" ,"+Global_Store.floatingCartBlock).addClass("active"),$(".js-price-list-body").hide(),$(".js-pcart-item-wrapper").show(),$("body").addClass("no-scroll")}),$(Global_Store.gridItem).on("click",function(t){window.location=$(this).data("url")}),$(".js-listing-option-label").on("change",function(t){if(0==$("option:selected",this).attr("data-quancheck"))if($(this).parents(".js-product-listing-details").find(".js-listing-addcart input").removeClass("hide-all"),$(".quantity").children(".js-quantity").val(1),$(".quantity").children(".js-quantity").attr("max",$(".js-option-label option:selected").attr("data-quantity")),$("option:selected",this).attr("data-before-sale-price")>0){var a="&nbsp;&nbsp;<strike>"+$(".js-global-currency").val()+$("option:selected",this).attr("data-before-sale-price")+"</strike>";$(this).parents(".grid-item").find(".js-base-price span").html($(".js-global-currency").val()+$("option:selected",this).attr("data-price")+a)}else $(this).parents(".grid-item").find(".js-base-price span").html($(".js-global-currency").val()+$("option:selected",this).attr("data-price"));else $(this).parents(".js-product-listing-details").find(".js-listing-addcart input").addClass("hide-all"),$(".js-base-price span").html("Sold Out <strike>"+$(".js-global-currency").val()+$(".js-option-label option:selected").attr("data-price")+"</strike>")}),$(Global_Store.addCartBtn).unbind("click"),$(Global_Store.addCartBtn).on("click",function(a){return $that=$(this),productId=$(this).data("pid"),r=$(this).data("img"),o=$(this).data("title"),labelId="undefined"!=typeof ProductVariation?ProductVariation.selectedVariant.id:0,quantity_threshold=$(this).data("quantity_threshold"),l=$(".js-quantity").val(),u=$(".js-store-cart-item-listing").data("itemadded"),y='<div class="js-favimg-noty favimg-noty left"><img src="'+r+'"></div>',j='<div class="js-favimg-title noty-favimg-title">'+o+"</div>",l<=0?(sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1):parseInt(l)>parseInt($(".js-quantity").attr("max"))?(sweetAlert("Oops...","You can add only "+parseInt($(".js-quantity").attr("max"))+" "+o+" to the Cart!","error"),!1):(Number.isInteger(parseFloat(l))||(l=1,$(".js-quantity").val(1)),$(".js-floating-pcart-empty").hide(),$(".js-checkout-container").show(),$(".js-floating-cart").removeClass("cart-not-active"),null==labelId&&(labelId=0),n="undefined"!=typeof ProductVariation&&labelId?ProductVariation.selectedVariant.price:$(".js-base-price").data("baseprice"),d=$(".js-global-currency").val(),labelValue="undefined"!=typeof ProductVariation?ProductVariation.selectedVariant.label:"",s=0,$(this).val("ADDING..."),$.ajax({type:"POST",url:"/cart?_token="+t,data:{option:labelId,quantity:l,productid:productId,global:"1"}}).done(function(t){parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all")),t.productId==productId&&t.quantity>0&&Global_Store.AddProduct(),$(".js-ptotal-amount").html(t.totalPrice),$(".js-pcart-value").text(t.quantity),$(".js-pcart-quantity").text(t.quantity),0==t.quantity&&($(".js-floating-pcart-empty").show(),$(".js-checkout-container").hide(),$(".js-floating-cart").addClass("cart-not-active")),0==t.quantity?($(".js-floating-pcart-empty").show(),$(Global_Store.floatingCartBtn).addClass("cart-not-active"),$(".js-pcheckout-container").hide(),$(".js-cart-qty-container").hide()):($(".js-floating-pcart-empty").hide(),$(".js-pcheckout-container").show(),$(Global_Store.floatingCartBtn).removeClass("cart-not-active"),$(".js-proofing-header-cart").addClass("favourite-count-active"),$(".js-cart-qty-container").show()),t.quantity>1?$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemslabel")):$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemlabel")),$(e).find(".js-cart-item-remove").attr("data-itemremove",g),$.each($(".js-store-cart-item-listing .js-cart-item-list"),function(a,e){t.productId==$(e).data("productid")&&t.optionId==$(e).data("optionlabel")&&($(e).find(".js-inside-cart-quantity").attr("data-itemid",t.itemId),$(e).find(".js-cart-item-remove").attr("data-itemid",t.itemId))}),$that.val($that.data("label"))}),void(Global_Store.AddProduct=function(){e=$("#cart-item-template").html(),e=$(e)[0],$(e).find(".crop-image-view").removeClass("jcrop-img-view"),$(e).find(".crop-image").removeClass("js-crop-image"),$(e).find(".crop-image").hide(),$(e).attr("data-optionlabel",labelId),$(e).attr("data-productid",productId),$(e).find(".js-inside-cart-quantity").attr("data-itemid",productId),$(e).find(".js-inside-cart-quantity").attr("data-product_type","store"),$(e).find(".js-cart-item-remove").attr("data-product_type","store"),$(e).find(".cart-item-image").attr("src",r),$(e).find(".cart-item-title").html(o),$(e).find(".cart-item-label").html(labelValue),$(e).find(".cart-item-unitprice").html(d+n),$(e).find(".cart-item-quantity").val(l),quantity_threshold&&$(e).find(".cart-item-quantity").css("visibility","hidden"),$(e).find(".cart-item-quantity").attr("data-prevvalue",l),$(e).find(".cart-item-quantity").attr("data-title",o),$(e).find(".cart-item-quantity").attr("data-maxlimit",$(".js-quantity").attr("max")),$(e).find(".cart-item-price").html(d+""+n*l),0!=$(".js-store-cart-item-listing .js-cart-item-list").length?$.each($(".js-store-cart-item-listing .js-cart-item-list"),function(t,a){$(a).data("productid")==productId&&$(a).data("optionlabel")==labelId?($(a).remove(),s=1):s=1}):$(".js-pcart-item-container").find(".js-store-cart-item-listing").append(e),1==s&&$(".js-pcart-item-container").find(".js-store-cart-item-listing").append(e);noty($.extend({text:u,type:"success",template:'<div class="noty_message text-left left">'+y+j+'<span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:6e3},window.notyDefaults))}))}),$(Global_Store.listingAddCartBtn).on("click",function(a){return $that=$(this),productId=$(this).data("pid"),r=$(this).data("img"),o=$(this).data("title"),labelId=$(this).parents(".js-product-listing-details").find(".js-listing-option-label").val(),quantity_threshold=$(this).data("quantity_threshold"),l=$(".js-quantity").val(),y='<div class="js-favimg-noty favimg-noty left"><img src="'+r+'"></div>',j='<div class="js-favimg-title noty-favimg-title">'+o+"</div>",l<=0?(sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1):parseInt(l)>parseInt($(".js-quantity").attr("max"))?(sweetAlert("Oops...","You can add only "+parseInt($(".js-quantity").attr("max"))+" "+o+" to the Cart!","error"),!1):(Number.isInteger(parseFloat(l))||(l=1,$(".js-quantity").val(1)),$(".js-floating-pcart-empty").hide(),$(".js-checkout-container").show(),$(".js-floating-pcart").removeClass("cart-not-active"),null==labelId&&(labelId=0),n=labelId?$(this).parents(".js-product-listing-details").find(".js-listing-option-label option:selected").attr("data-price"):$(this).data("baseprice"),d=$(".js-global-currency").val(),labelValue=$(this).parents(".js-product-listing-details").find(".js-listing-option-label option:selected").attr("data-label"),s=0,$(this).val("ADDING..."),$.ajax({type:"POST",url:"/cart?_token="+t,data:{option:labelId,quantity:l,productid:productId,global:"1"}}).done(function(t){parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Global_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Global_Store.checkoutForm).hide().addClass("hide-all")),t.productId==productId&&t.quantity>0&&Global_Store.AddItem(),$(".js-ptotal-amount").html(t.totalPrice),$(".js-pcart-value").text(t.quantity),$(".js-pcart-quantity").text(t.quantity),0==t.quantity&&($(".js-floating-pcart-empty").show(),$(".js-checkout-container").hide(),$(".js-floating-cart").addClass("cart-not-active")),0==t.quantity?($(".js-floating-pcart-empty").show(),$(Global_Store.floatingCartBtn).addClass("cart-not-active"),$(".js-pcheckout-container").hide(),$(".js-cart-qty-container").hide()):($(".js-floating-pcart-empty").hide(),$(".js-pcheckout-container").show(),$(Global_Store.floatingCartBtn).removeClass("cart-not-active"),$(".js-proofing-header-cart").addClass("favourite-count-active"),$(".js-cart-qty-container").show()),t.quantity>1?$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemslabel")):$(".js-cart-value-label").text($(".js-itemlabel-holder").data("itemlabel")),$(e).find(".js-cart-item-remove").attr("data-itemremove",g),$.each($(".js-store-cart-item-listing .js-cart-item-list"),function(a,e){t.productId==$(e).data("productid")&&t.optionId==$(e).data("optionlabel")&&($(e).find(".js-inside-cart-quantity").attr("data-itemid",t.itemId),$(e).find(".js-cart-item-remove").attr("data-itemid",t.itemId))}),$that.val($that.data("label"))}),void(Global_Store.AddItem=function(){e=$("#cart-item-template").html(),e=$(e)[0],$(e).find(".crop-image-view").removeClass("jcrop-img-view"),$(e).find(".crop-image").removeClass("js-crop-image"),$(e).find(".crop-image").hide(),$(e).attr("data-optionlabel",labelId),$(e).attr("data-productid",productId),$(e).find(".js-inside-cart-quantity").attr("data-itemid",productId),$(e).find(".js-inside-cart-quantity").attr("data-product_type","store"),$(e).find(".js-cart-item-remove").attr("data-product_type","store"),$(e).find(".cart-item-image").attr("src",r),$(e).find(".cart-item-title").html(o),$(e).find(".cart-item-label").html(labelValue),$(e).find(".cart-item-unitprice").html(d+n),$(e).find(".cart-item-quantity").val(l),quantity_threshold&&$(e).find(".cart-item-quantity").css("visibility","hidden"),$(e).find(".cart-item-quantity").attr("data-prevvalue",l),$(e).find(".cart-item-quantity").attr("data-title",o),$(e).find(".cart-item-quantity").attr("data-maxlimit",$(".js-quantity").attr("max")),$(e).find(".cart-item-price").html(d+""+n*l),0!=$(".js-store-cart-item-listing .js-cart-item-list").length?$.each($(".js-store-cart-item-listing .js-cart-item-list"),function(t,a){$(a).data("productid")==productId&&$(a).data("optionlabel")==labelId?($(a).remove(),s=1):s=1}):$(".js-pcart-item-container .js-store-cart-item-listing").append(e),1==s&&$(".js-pcart-item-container .js-store-cart-item-listing").append(e);noty($.extend({text:$(".js-store-cart-item-listing").data("itemadded"),type:"success",template:'<div class="noty_message text-left left">'+y+j+'<span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:6e3},window.notyDefaults))}))})},_JCROP={},_JCROP.init=function(){function t(t){_JCROP.coor=t,getPoints()}jQuery(function(a){a(".magic").Jcrop({onSelect:t,onChange:t,setSelect:[_JCROP.boxData.x,_JCROP.boxData.y,_JCROP.boxData.w,_JCROP.boxData.h],allowResize:!1,allowSelect:!1,boxWidth:500,boxHeight:550},function(){_JCROP.jcrop=this})})},Global_Store.crop_init=function(t){_JCROP.boxData={},_JCROP.active=t,_JCROP.boxData.x=$(t).attr("data-x"),_JCROP.boxData.y=$(t).attr("data-y"),_JCROP.boxData.h=$(t).attr("data-h"),_JCROP.boxData.w=$(t).attr("data-w"),_JCROP.asp={x:parseFloat($(t).attr("data-aspx")),y:parseFloat($(t).attr("data-aspy"))},_JCROP.cartid=$(t).parent().parent().find(Global_Store.insideCartQuantity).attr("data-itemid");var a=new Image;if(a.className="magic",$(".crop-image-wrapper").html(a),"1"==userObject.isMobile)var e=get500Image($(t).parent().parent().find("img").attr("src"));else e=get500Image($(t).parent().parent().parent().find("img").attr("src"));a.onload=function(){_JCROP.img={},_JCROP.img.el=a,_JCROP.img.x=a.width,_JCROP.img.y=a.height,_JCROP.init()},a.src=e},Global_Store.cropModalInit=function(){$(Global_Store.cropImageBtn).unbind("click"),$(Global_Store.cropImageBtn).on("click",function(t){$(Global_Store.cropImage).addClass("image-crop-modal-active bg-white js-crop-modal-bg"),$(".js-image-crop-body-overlay, .js-image-crop-body").addClass("image-crop-modal-active js-crop-modal-body"),Global_Store.crop_init(this),$("body").find(".jcrop-img-view").removeClass("js-update_jcrop"),$("body").find(".js-cart-item-list").removeClass("js-update_jcrop_bg"),$(this).parent().parent().siblings(".jcrop-img-view").addClass("js-update_jcrop"),$(this).parent().parent().parent(".js-cart-item-list").addClass("js-update_jcrop_bg")}),$(Global_Store.cropImageCloseBtn).unbind("click"),$(Global_Store.cropImageCloseBtn).on("click",function(){$(Global_Store.cropImage).removeClass("image-crop-modal-active bg-white js-crop-modal-bg"),$(".js-image-crop-body-overlay, .js-image-crop-body").removeClass("image-crop-modal-active"),$(".magic").length>0&&$(".magic").remove(),void 0!==_JCROP.jcrop&&_JCROP.jcrop.destroy(),$("body").find(".jcrop-img-view").removeClass("js-update_jcrop"),$("body").find(".js-cart-item-list").removeClass("js-update_jcrop_bg")}),$(Global_Store.cropCartUpdate).unbind("click"),$(Global_Store.cropCartUpdate).on("click",function(){updateCartCoordinates(),$(function(){Global_Store.jCropintUpdate()})}),$(".js-rotate-crop").unbind("click"),$(".js-rotate-crop").on("click",function(){Global_Store.rotateCrop()})},Global_Store.jCropint=function(){$(".jcrop-img-view img").each(function(){var t=$(this).parents(".jcrop-img-view").attr("data-x"),a=$(this).parents(".jcrop-img-view").attr("data-y"),e=$(this).parents(".jcrop-img-view").attr("data-h"),i=$(this).parents(".jcrop-img-view").attr("data-w"),r=parseFloat($(this).parents(".jcrop-img-view").attr("data-aspx")),o=parseFloat($(this).parents(".jcrop-img-view").attr("data-aspy"));$(this).Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t,a,e,i],aspectRatio:r/o,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[i,e]})})},Global_Store.jCropintUpdate=function(){setTimeout(function(){var t=$(".js-update_jcrop").attr("data-x"),a=$(".js-update_jcrop").attr("data-y"),e=$(".js-update_jcrop").attr("data-h"),i=$(".js-update_jcrop").attr("data-w"),r=parseFloat($(".js-update_jcrop").attr("data-aspx")),o=parseFloat($(".js-update_jcrop").attr("data-aspy"));$(".js-update_jcrop img").Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t,a,e,i],aspectRatio:r/o,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[i,e]})},1e3)};
